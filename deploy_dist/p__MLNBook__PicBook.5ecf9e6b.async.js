(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[257],{5966:function(H,B,r){"use strict";var v=r(28991),o=r(81253),w=r(85893),P=r(80202),_=["fieldProps","proFieldProps"],j=["fieldProps","proFieldProps"],i="text",p=function(s){var x=s.fieldProps,C=s.proFieldProps,L=(0,o.Z)(s,_);return(0,w.jsx)(P.Z,(0,v.Z)({valueType:i,fieldProps:x,filedConfig:{valueType:i},proFieldProps:C},L))},k=function(s){var x=s.fieldProps,C=s.proFieldProps,L=(0,o.Z)(s,j);return(0,w.jsx)(P.Z,(0,v.Z)({valueType:"password",fieldProps:x,proFieldProps:C,filedConfig:{valueType:i}},L))},Z=p;Z.Password=k,Z.displayName="ProFormComponent",B.Z=Z},2615:function(H,B,r){"use strict";r.r(B),r.d(B,{default:function(){return N}});var v=r(39428),o=r(3182),w=r(57663),P=r(71577),_=r(12968),j=r(20352),i=r(2824),p=r(67294),k=r(17294),Z=r(76092),R=r(9684),s=r(51042),x=r(61870),C=r(65554),L=r(71194),$=r(50146),q=r(9715),W=r(903),ee=r(37476),G=r(5966),I=r(64317),K=r(60451),X=r(90672),d=r(85893),re=function(M){var e=M.record,t=M.setShowModal,u=M.showModal,a=M.actionRef,n=W.Z.useForm(),y=(0,i.Z)(n,1),g=y[0],h=(0,p.useState)(!1),V=(0,i.Z)(h,2),f=V[0],m=V[1],l=(0,p.useState)(""),b=(0,i.Z)(l,2),Q=b[0],Y=b[1],ne=(0,p.useState)({}),F=(0,i.Z)(ne,2),J=F[0],le=F[1];return(0,p.useEffect)((0,o.Z)((0,v.Z)().mark(function A(){var T,c;return(0,v.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(e!=null&&e.id)){E.next=8;break}return E.next=3,(0,x.Cy)({id:e==null?void 0:e.id});case 3:c=E.sent,c.author=(c==null||(T=c.author)===null||T===void 0?void 0:T.map(function(D){return D.id}))||[],le(c),c!=null&&c.cover_img&&(c.cover_img=[{url:c==null?void 0:c.cover_img}]),g.setFieldsValue(c);case 8:case"end":return E.stop()}},A)})),[e==null?void 0:e.id]),(0,d.jsxs)(ee.Y,{title:e!=null&&e.id?"\u7F16\u8F91\u7ED8\u672C:".concat(e==null?void 0:e.id):"\u65B0\u5EFA\u7ED8\u672C",form:g,labelCol:{span:3},layout:"horizontal",visible:u,onVisibleChange:t,initialValues:J!=null&&J.id?J:{language:"en_US",language_level:"A1",phase:"preschool",grade:"age1-preschool",voice_template:[1]},onFinish:function(){var A=(0,o.Z)((0,v.Z)().mark(function T(c){var S,E,D;return(0,v.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(S=new FormData,Object.keys(c).forEach(function(U){U==="cover_img"?c[U][0].originFileObj&&S.append(U,c[U][0].originFileObj):S.append(U,c[U])}),!(e!=null&&e.id)){O.next=9;break}return S.append("id",e==null?void 0:e.id),O.next=6,(0,x.zk)(e==null?void 0:e.id,S);case 6:E=O.sent,O.next=12;break;case 9:return O.next=11,(0,x.Zz)(S);case 11:E=O.sent;case 12:E&&(t(!1),a==null||(D=a.current)===null||D===void 0||D.reload());case 13:case"end":return O.stop()}},T)}));return function(T){return A.apply(this,arguments)}}(),children:[(0,d.jsx)(G.Z,{rules:[{required:!0}],name:"title",label:"\u4E66\u540D",placeholder:"\u8F93\u5165\u7ED8\u672C\u540D\u79F0"}),(0,d.jsx)(I.Z,{label:"\u8BED\u8A00",rules:[{required:!0}],name:"language",placeholder:"\u9009\u62E9\u7ED8\u672C\u8BED\u8A00",options:C.uq}),(0,d.jsx)(I.Z,{label:"\u8BED\u8A00\u7EA7\u522B",rules:[{required:!0}],name:"language_level",placeholder:"\u9009\u62E9\u7ED8\u672C\u8BED\u8A00",options:C.EM}),(0,d.jsx)(I.Z,{label:"\u5B66\u6BB5",rules:[{required:!0}],name:"phase",placeholder:"\u9009\u62E9\u7ED8\u672C\u5B66\u6BB5",options:C.PW}),(0,d.jsx)(I.Z,{label:"\u5E74\u7EA7",rules:[{required:!0}],name:"phase",placeholder:"\u9009\u62E9\u7ED8\u672C\u5E74\u7EA7",options:C.rT}),(0,d.jsx)(K.Z,{name:"cover_img",label:"\u5C01\u9762\u56FE",max:1,fieldProps:{data:{},defaultFileList:[],multiple:!1,onPreview:function(T){Y(T.url||T.thumbUrl),m(!0)},listType:"picture-card",accept:".png,.jpg,.jpeg",maxCount:1},extra:"\u652F\u6301 JPG\u3001PNG \u683C\u5F0F"}),(0,d.jsx)($.Z,{open:f,footer:null,onCancel:function(){m(!1)},children:(0,d.jsx)("img",{alt:"example",style:{width:"100%"},src:Q})}),(0,d.jsx)(I.Z,{label:"\u4F5C\u8005",rules:[{required:!0}],name:"author",mode:"multiple",placeholder:"\u9009\u62E9\u4F5C\u8005",request:(0,o.Z)((0,v.Z)().mark(function A(){var T,c;return(0,v.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,x.Dh)();case 2:return T=E.sent,c=T==null?void 0:T.map(function(D){return{label:"".concat(D.name,"(id:").concat(D.id,")"),value:D.id}}),E.abrupt("return",c);case 5:case"end":return E.stop()}},A)}))}),(0,d.jsx)(X.Z,{name:"description",label:"\u63CF\u8FF0"})]})},z=re,ae=function(){var M=(0,p.useState)(!1),e=(0,i.Z)(M,2),t=e[0],u=e[1],a=(0,p.useState)(),n=(0,i.Z)(a,2),y=n[0],g=n[1],h=(0,p.useRef)(),V=[{title:"ID",dataIndex:"id"},{title:"\u6807\u9898",dataIndex:"title"},{title:"\u63CF\u8FF0",dataIndex:"description",valueType:"textarea",width:"15%"},{title:"\u5C01\u9762\u56FE",dataIndex:"cover_img",render:function(m,l){return[l!=null&&l.cover_img?(0,d.jsx)(j.Z,{src:l==null?void 0:l.cover_img,width:35,height:35}):null]}},{title:"\u8BED\u8A00",dataIndex:"language",filters:!0,onFilter:!0,valueEnum:C.uq.reduce(function(f,m){var l=m.value,b=m.label;return f[l]={text:b},f},{})},{title:"\u8BED\u8A00\u7EA7\u522B",dataIndex:"language_level",filters:!0,onFilter:!0,valueEnum:C.EM.reduce(function(f,m){var l=m.value,b=m.label;return f[l]={text:b},f},{})},{title:"\u5B66\u6BB5",dataIndex:"phase",filters:!0,onFilter:!0,valueEnum:C.PW.reduce(function(f,m){var l=m.value,b=m.label;return f[l]={text:b},f},{})},{title:"\u5E74\u7EA7",dataIndex:"grade",filters:!0,onFilter:!0,valueEnum:C.rT.reduce(function(f,m){var l=m.value,b=m.label;return f[l]={text:b},f},{})},{title:"\u4F5C\u8005",dataIndex:"author",render:function(m,l){var b;return(l==null||(b=l.author)===null||b===void 0?void 0:b.map(function(Q){return Q.name}).join(", "))||""}},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"utime"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(m,l){return[(0,d.jsx)("a",{onClick:function(){u(!0),g(l)},children:"\u7F16\u8F91"},"config"),(0,d.jsx)("a",{onClick:function(){R.m.push({pathname:"/pic_book/designing",query:{id:l==null?void 0:l.id}})},children:"\u6392\u7248"},"config"),(0,d.jsx)("a",{onClick:function(){R.m.push({pathname:"/pic_book/voice",query:{id:l==null?void 0:l.id}})},children:"\u8BED\u97F3\u751F\u6210"},"config")]}}];return(0,d.jsxs)(k.ZP,{title:!1,pageHeaderRender:!1,children:[(0,d.jsx)(Z.Z,{headerTitle:"\u7ED8\u672C\u5217\u8868",actionRef:h,rowKey:"key",size:"small",search:!1,options:{density:!1},toolBarRender:function(){return[(0,d.jsxs)(P.Z,{type:"primary",onClick:function(){u(!0),g({})},children:[(0,d.jsx)(s.Z,{})," \u65B0\u5EFA"]},"primary")]},request:function(){var f=(0,o.Z)((0,v.Z)().mark(function m(l,b,Q){var Y;return(0,v.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,x.lQ)(l);case 2:return Y=F.sent,F.abrupt("return",{data:Y});case 4:case"end":return F.stop()}},m)}));return function(m,l,b){return f.apply(this,arguments)}}(),columns:V}),t&&(0,d.jsx)(z,{record:y,setShowModal:u,showModal:t,actionRef:h})]})},N=ae},65554:function(H,B,r){"use strict";r.d(B,{uq:function(){return v},EM:function(){return o},PW:function(){return w},rT:function(){return P},n_:function(){return _}});var v=[{value:"en_US",label:"\u82F1\u8BED"},{value:"zh_CN",label:"\u7B80\u4F53\u4E2D\u6587"},{value:"fr_FR",label:"\u6CD5\u8BED"},{value:"es_ES",label:"\u897F\u73ED\u7259\u8BED"},{value:"ar_AE",label:"\u963F\u62C9\u4F2F\u8BED"},{value:"ru_RU",label:"\u4FC4\u8BED"}],o=[{value:"A1",label:"\u5165\u95E8\u7EA7"},{value:"A2",label:"\u57FA\u7840\u7EA7"},{value:"B1",label:"\u8FDB\u9636\u7EA7"},{value:"B2",label:"\u9AD8\u9636\u7EA7"},{value:"C1",label:"\u6D41\u5229\u8FD0\u7528\u7EA7"},{value:"C2",label:"\u7CBE\u901A\u7EA7"}],w=[{value:"preschool",label:"\u5B66\u524D\u73ED"},{value:"kindergarten",label:"\u5E7C\u513F\u56ED"},{value:"primary",label:"\u5C0F\u5B66"},{value:"middle",label:"\u521D\u4E2D"},{value:"high",label:"\u9AD8\u4E2D"},{value:"university",label:"\u5927\u5B66"}],P=[{value:"age1-preschool",label:"\u5B66\u524D1\u5C81"},{value:"age2-preschool",label:"\u5B66\u524D2\u5C81"},{value:"age3-preschool",label:"\u5B66\u524D3\u5C81"},{value:"age4-preschool",label:"\u5B66\u524D4\u5C81"},{value:"age5-preschool",label:"\u5B66\u524D5\u5C81"},{value:"kindergarten",label:"\u5E7C\u513F\u56ED"},{value:"grade1-primary",label:"\u5C0F\u5B66\u4E00\u5E74\u7EA7"},{value:"grade2-primary",label:"\u5C0F\u5B66\u4E8C\u5E74\u7EA7"},{value:"grade3-primary",label:"\u5C0F\u5B66\u4E09\u5E74\u7EA7"},{value:"grade4-primary",label:"\u5C0F\u5B66\u56DB\u5E74\u7EA7"},{value:"grade5-primary",label:"\u5C0F\u5B66\u4E94\u5E74\u7EA7"},{value:"grade6-primary",label:"\u5C0F\u5B66\u516D\u5E74\u7EA7"},{value:"grade7-middle",label:"\u521D\u4E2D\u4E00\u5E74\u7EA7"},{value:"grade8-middle",label:"\u521D\u4E2D\u4E8C\u5E74\u7EA7"},{value:"grade9-middle",label:"\u521D\u4E2D\u4E09\u5E74\u7EA7"},{value:"grade10-high",label:"\u9AD8\u4E2D\u4E00\u5E74\u7EA7"},{value:"grade11-high",label:"\u9AD8\u4E2D\u4E8C\u5E74\u7EA7"},{value:"grade12-high",label:"\u9AD8\u4E2D\u4E09\u5E74\u7EA7"},{value:"freshman-university",label:"\u5927\u5B66\u4E00\u5E74\u7EA7"},{value:"sophomore-university",label:"\u5927\u5B66\u4E8C\u5E74\u7EA7"},{value:"junior-university",label:"\u5927\u5B66\u4E09\u5E74\u7EA7"},{value:"senior-university",label:"\u5927\u5B66\u56DB\u5E74\u7EA7"}],_={iPhone12Pro:{height:"844px",width:"390px"},iPhoneXR:{height:"896px",width:"414px"},iPhone14ProMax:{height:"932px",width:"430px"}}},61870:function(H,B,r){"use strict";r.d(B,{lQ:function(){return k},Cy:function(){return R},e:function(){return x},zk:function(){return L},Zz:function(){return q},Y6:function(){return I},Dh:function(){return X}});var v=r(93224),o=r(39428),w=r(11849),P=r(3182),_=r(78370),j=["id"],i=["id"],p=null;function k(e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,P.Z)((0,o.Z)().mark(function e(t,u){return(0,o.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.Z)("/api/pic_book/book/",(0,w.Z)({method:"GET",data:(0,w.Z)({},t)},u||{})));case 1:case"end":return n.stop()}},e)})),Z.apply(this,arguments)}function R(e,t){return s.apply(this,arguments)}function s(){return s=(0,P.Z)((0,o.Z)().mark(function e(t,u){var a,n,y;return(0,o.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=t.id,n=a===void 0?0:a,y=(0,v.Z)(t,j),h.abrupt("return",(0,_.Z)("/api/pic_book/book/".concat(n,"/"),(0,w.Z)({method:"GET"},u||{})));case 2:case"end":return h.stop()}},e)})),s.apply(this,arguments)}function x(e,t){return C.apply(this,arguments)}function C(){return C=(0,P.Z)((0,o.Z)().mark(function e(t,u){var a,n,y;return(0,o.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=t.id,n=a===void 0?0:a,y=(0,v.Z)(t,i),h.abrupt("return",(0,_.Z)("/api/pic_book/book/".concat(n,"/preview/"),(0,w.Z)({method:"GET"},u||{})));case 2:case"end":return h.stop()}},e)})),C.apply(this,arguments)}function L(e,t,u){return $.apply(this,arguments)}function $(){return $=(0,P.Z)((0,o.Z)().mark(function e(t,u,a){return(0,o.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,_.Z)("/api/pic_book/book/".concat(t,"/"),(0,w.Z)({method:"PATCH",data:u},a||{})));case 1:case"end":return y.stop()}},e)})),$.apply(this,arguments)}function q(e,t){return W.apply(this,arguments)}function W(){return W=(0,P.Z)((0,o.Z)().mark(function e(t,u){return(0,o.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.Z)("/api/pic_book/book/",(0,w.Z)({method:"POST",data:t},u||{})));case 1:case"end":return n.stop()}},e)})),W.apply(this,arguments)}function ee(e,t){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,u){var a,n;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return a=t.id,n=a===void 0?0:a,g.abrupt("return",request("/api/pic_book/book/".concat(n),_objectSpread({method:"DELETE"},u||{})));case 2:case"end":return g.stop()}},e)})),G.apply(this,arguments)}function I(e){return K.apply(this,arguments)}function K(){return K=(0,P.Z)((0,o.Z)().mark(function e(t){return(0,o.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.Z)("/api/pic_book/voice_template/",(0,w.Z)({method:"GET"},t||{})));case 1:case"end":return a.stop()}},e)})),K.apply(this,arguments)}function X(e){return d.apply(this,arguments)}function d(){return d=(0,P.Z)((0,o.Z)().mark(function e(t){return(0,o.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.Z)("/api/pic_book/author/",(0,w.Z)({method:"GET"},t||{})));case 1:case"end":return a.stop()}},e)})),d.apply(this,arguments)}function re(e,t){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,u){var a,n,y;return _regeneratorRuntime().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=t.id,n=a===void 0?0:a,y=_objectWithoutProperties(t,p),h.abrupt("return",request("/api/pic_book/chapter/".concat(n,"/"),_objectSpread({method:"PATCH",data:y},u||{})));case 2:case"end":return h.stop()}},e)})),z.apply(this,arguments)}function ae(e,t){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,u){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/pic_book/chapter/",_objectSpread({method:"POST",data:_objectSpread({},t)},u||{})));case 1:case"end":return n.stop()}},e)})),N.apply(this,arguments)}function te(e,t){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,u){var a,n;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return a=t.id,n=a===void 0?0:a,g.abrupt("return",request("/api/pic_book/chapter/".concat(n,"/"),_objectSpread({method:"DELETE"},u||{})).catch(function(h){return{}}));case 2:case"end":return g.stop()}},e)})),M.apply(this,arguments)}},78370:function(H,B,r){"use strict";var v=r(39428),o=r(34792),w=r(48086),P=r(3182),_=r(11849),j=r(11238);j.ZP.interceptors.request.use(function(i,p){if(i!="/v2api/auth/users/current/"){var k={Authorization:"Token "+localStorage.getItem("token")};return{url:i,options:(0,_.Z)((0,_.Z)({},p),{},{headers:k,interceptors:!0})}}return{url:i,options:(0,_.Z)((0,_.Z)({},p),{},{interceptors:!0})}}),j.ZP.interceptors.request.use(function(i,p){return{url:"".concat(i),options:(0,_.Z)((0,_.Z)({},p),{},{interceptors:!0})}},{global:!0}),j.ZP.interceptors.response.use(function(i,p){var k=i.headers.get("Content-Type");return i}),j.ZP.interceptors.response.use(function(){var i=(0,P.Z)((0,v.Z)().mark(function p(k){var Z;return(0,v.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return Z={500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"},Z[k.status]&&w.ZP.error(Z[k.status]),s.abrupt("return",k);case 3:case"end":return s.stop()}},p)}));return function(p){return i.apply(this,arguments)}}()),j.ZP.interceptors.response.use(function(){var i=(0,P.Z)((0,v.Z)().mark(function p(k){var Z;return(0,v.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,k.clone().json();case 2:return Z=s.sent,Z&&Z.NOT_LOGIN&&(location.href="\u767B\u5F55url"),s.abrupt("return",k);case 5:case"end":return s.stop()}},p)}));return function(p){return i.apply(this,arguments)}}()),B.Z=j.ZP}}]);
