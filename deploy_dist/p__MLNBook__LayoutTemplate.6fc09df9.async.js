(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[856],{5966:function(X,W,e){"use strict";var f=e(28991),y=e(81253),P=e(85893),a=e(80202),T=["fieldProps","proFieldProps"],F=["fieldProps","proFieldProps"],p="text",c=function(o){var h=o.fieldProps,d=o.proFieldProps,j=(0,y.Z)(o,T);return(0,P.jsx)(a.Z,(0,f.Z)({valueType:p,fieldProps:h,filedConfig:{valueType:p},proFieldProps:d},j))},u=function(o){var h=o.fieldProps,d=o.proFieldProps,j=(0,y.Z)(o,F);return(0,P.jsx)(a.Z,(0,f.Z)({valueType:"password",fieldProps:h,proFieldProps:d,filedConfig:{valueType:p}},j))},x=c;x.Password=u,x.displayName="ProFormComponent",W.Z=x},5894:function(X,W,e){"use strict";e.d(W,{A:function(){return S}});var f=e(9715),y=e(903),P=e(28991),a=e(85893),T=e(84683),F=e(96156),p=e(49111),c=e(19650),u=e(84305),x=e(88182),G=e(28481),o=e(43929),h=e(56725),d=e(53621),j=e(94184),E=e.n(j),i=e(67294),R=e(66758),M=e(2514),de=e(96138),q=i.forwardRef(function(I,J){var V=i.useContext(R.Z),k=V.groupProps,Z=(0,P.Z)((0,P.Z)({},k),I),ee=Z.children,re=Z.collapsible,ce=Z.defaultCollapsed,ve=Z.style,fe=Z.labelLayout,te=Z.title,Y=te===void 0?I.label:te,ne=Z.tooltip,oe=Z.align,ae=oe===void 0?"start":oe,le=Z.direction,se=Z.size,z=se===void 0?32:se,n=Z.titleStyle,t=Z.titleRender,m=Z.spaceProps,s=Z.extra,D=Z.autoFocus,O=(0,h.Z)(function(){return ce||!1},{value:I.collapsed,onChange:I.onCollapse}),L=(0,G.Z)(O,2),_=L[0],w=L[1],B=(0,i.useContext)(x.ZP.ConfigContext),g=B.getPrefixCls,C=(0,M.zx)(I),l=C.ColWrapper,v=C.RowWrapper,b=g("pro-form-group"),$=re&&(0,a.jsx)(o.Z,{style:{marginRight:8},rotate:_?void 0:90}),K=(0,a.jsx)(d.Z,{label:$?(0,a.jsxs)("div",{children:[$,Y]}):Y,tooltip:ne}),U=(0,i.useCallback)(function(A){var Q=A.children;return(0,a.jsx)(c.Z,(0,P.Z)((0,P.Z)({},m),{},{className:E()("".concat(b,"-container"),m==null?void 0:m.className),size:z,align:ae,direction:le,style:(0,P.Z)({rowGap:0},m==null?void 0:m.style),children:Q}))},[ae,b,le,z,m]),ie=t?t(K,I):K,me=(0,i.useMemo)(function(){var A=[],Q=i.Children.toArray(ee).map(function(N,Pe){var he;return i.isValidElement(N)&&(N==null||(he=N.props)===null||he===void 0?void 0:he.hidden)?(A.push(N),null):Pe===0&&i.isValidElement(N)&&D?i.cloneElement(N,(0,P.Z)((0,P.Z)({},N.props),{},{autoFocus:D})):N});return[(0,a.jsx)(v,{Wrapper:U,children:Q},"children"),A.length>0?(0,a.jsx)("div",{style:{display:"none"},children:A}):null]},[ee,v,U,D]),ue=(0,G.Z)(me,2),H=ue[0],xe=ue[1];return(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:E()(b,(0,F.Z)({},"".concat(b,"-twoLine"),fe==="twoLine")),style:ve,ref:J,children:[xe,(Y||ne||s)&&(0,a.jsx)("div",{className:"".concat(b,"-title"),style:n,onClick:function(){w(!_)},children:s?(0,a.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[ie,(0,a.jsx)("span",{onClick:function(Q){return Q.stopPropagation()},children:s})]}):ie}),re&&_?null:H]})})});q.displayName="ProForm-Group";var r=q,pe=e(5163);function S(I){return(0,a.jsx)(T.I,(0,P.Z)({layout:"vertical",submitter:{render:function(V,k){return k.reverse()}},contentRender:function(V,k){return(0,a.jsxs)(a.Fragment,{children:[V,k]})}},I))}S.Group=r,S.useForm=y.Z.useForm,S.Item=pe.Z,S.useWatch=y.Z.useWatch,S.ErrorList=y.Z.ErrorList,S.Provider=y.Z.Provider,S.useFormInstance=y.Z.useFormInstance},96138:function(){},44508:function(X,W,e){"use strict";e.r(W),e.d(W,{default:function(){return se}});var f=e(39428),y=e(3182),P=e(57663),a=e(71577),T=e(12968),F=e(20352),p=e(2824),c=e(51042),u=e(67294),x=e(17294),G=e(9056),o=e(25049),h=e(37476),d=e(5966),j=e(90672),E=e(64317),i=e(5894),R=i.A.Group,M=e(28991),de=e(81253),q=e(20147),r=e(85893),pe=["fieldProps","popoverProps","proFieldProps","colors"],S=function(n,t){var m=n.fieldProps,s=n.popoverProps,D=n.proFieldProps,O=n.colors,L=(0,de.Z)(n,pe);return(0,r.jsx)(q.Z,(0,M.Z)({valueType:"color",fieldProps:(0,M.Z)({popoverProps:s,colors:O},m),ref:t,proFieldProps:D,filedConfig:{defaultProps:{width:"100%"}}},L))},I=u.forwardRef(S),J=e(22122),V=e(94737),k=e(50699),Z=function(n,t){return u.createElement(k.Z,(0,J.Z)({},n,{ref:t,icon:V.Z}))},ee=u.forwardRef(Z),re=e(94412),ce=e(44190),ve=e(17969),fe=["fieldProps","action","accept","listType","title","max","icon","buttonProps","disabled","proFieldProps"],te=function(n,t){var m,s=n.fieldProps,D=n.action,O=n.accept,L=n.listType,_=n.title,w=_===void 0?"\u5355\u51FB\u4E0A\u4F20":_,B=n.max,g=n.icon,C=g===void 0?(0,r.jsx)(ee,{}):g,l=n.buttonProps,v=n.disabled,b=n.proFieldProps,$=(0,de.Z)(n,fe),K=(0,u.useMemo)(function(){var H;return(H=$.fileList)!==null&&H!==void 0?H:$.value},[$.fileList,$.value]),U=(0,u.useContext)(ce.A),ie=(b==null?void 0:b.mode)||U.mode||"edit",me=(B===void 0||!K||(K==null?void 0:K.length)<B)&&ie!=="read",ue=(L!=null?L:s==null?void 0:s.listType)==="picture-card";return(0,r.jsx)(re.Z,(0,M.Z)((0,M.Z)({action:D,accept:O,ref:t,listType:L||"picture",fileList:K},s),{},{name:(m=s==null?void 0:s.name)!==null&&m!==void 0?m:"file",onChange:function(xe){var A;s==null||(A=s.onChange)===null||A===void 0||A.call(s,xe)},children:me&&(ue?(0,r.jsxs)("span",{children:[C," ",w]}):(0,r.jsxs)(a.Z,(0,M.Z)((0,M.Z)({disabled:v||(s==null?void 0:s.disabled)},l),{},{children:[C,w]})))}))},Y=(0,ve.G)(u.forwardRef(te),{getValueFromEvent:function(n){return n.fileList}}),ne=Y,oe=function(n){var t=n.record,m=n.setShowModal,s=n.showModal,D=n.actionRef,O=n.updatePageDetailsFunc;t!=null&&t.background_img&&(t.background_img=[{url:t==null?void 0:t.background_img}]);var L=t.id?t:{c_type:"protected",grid_row_col:"[[24]]",grid_gutter:"[16, 24]",font_color:"#0000E0",font_family:"Arial",font_size:14,background_color:"#FFFFFF",text_flex_justify:"flex-end",text_flex_align:"flex-end",text_opacity:1};return(0,r.jsxs)(h.Y,{title:t!=null&&t.id?"\u7F16\u8F91\u9875\u9762\u6A21\u677F:".concat(t==null?void 0:t.id):"\u65B0\u5EFA\u9875\u9762\u6A21\u677F",width:"750px",layout:"horizontal",visible:s,initialValues:L,onVisibleChange:m,onFinish:function(){var _=(0,y.Z)((0,f.Z)().mark(function w(B){var g,C;return(0,f.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(g=new FormData,Object.keys(B).forEach(function(b){b==="background_img"?B[b][0].originFileObj&&g.append(b,B[b][0].originFileObj):g.append(b,B[b])}),!(t!=null&&t.id)){v.next=9;break}return g.append("id",t==null?void 0:t.id),v.next=6,(0,o.fc)(t==null?void 0:t.id,g);case 6:C=v.sent,v.next=12;break;case 9:return v.next=11,(0,o.Lk)(g);case 11:C=v.sent;case 12:if(!C){v.next=20;break}if(m(!1),!O){v.next=19;break}return v.next=17,O();case 17:v.next=20;break;case 19:D.current&&D.current.reload();case 20:case"end":return v.stop()}},w)}));return function(w){return _.apply(this,arguments)}}(),children:[(0,r.jsx)(d.Z,{rules:[{required:!0}],label:"\u6807\u9898",name:"title"}),(0,r.jsx)(j.Z,{rules:[{required:!0}],label:"\u63CF\u8FF0",name:"description"}),(0,r.jsx)(E.Z,{rules:[{required:!0}],label:"\u7C7B\u578B",name:"c_type",options:[{label:"\u5B8C\u5168\u516C\u5F00",value:"public"},{label:"\u5185\u90E8\u4F7F\u7528",value:"protected"},{label:"\u79C1\u6709",value:"private"}]}),(0,r.jsxs)(R,{children:[(0,r.jsx)(d.Z,{rules:[{required:!0}],label:"\u6805\u683C\u5E03\u5C40",name:"grid_row_col"}),(0,r.jsx)(d.Z,{rules:[{required:!0}],label:"\u6805\u683C\u95F4\u8DDD",name:"grid_gutter"})]}),(0,r.jsxs)(R,{children:[(0,r.jsx)(I,{label:"\u5B57\u4F53\u989C\u8272",rules:[{required:!0}],name:"font_color"}),(0,r.jsx)(d.Z,{rules:[{required:!0}],label:"\u5B57\u4F53",width:150,name:"font_family"}),(0,r.jsx)(d.Z,{rules:[{required:!0}],label:"\u5B57\u4F53\u5927\u5C0F",width:125,name:"font_size"})]}),(0,r.jsxs)(R,{children:[(0,r.jsx)(ne,{name:"background_img",label:"\u80CC\u666F\u56FE",max:1,fieldProps:{data:{},defaultFileList:[],multiple:!1,listType:"picture-card",accept:".png,.jpg,.jpeg",maxCount:1},extra:"\u652F\u6301 JPG\u3001PNG \u683C\u5F0F"}),(0,r.jsx)(I,{label:"\u80CC\u666F\u989C\u8272",rules:[{required:!0}],name:"background_color"})]}),(0,r.jsxs)(R,{children:[(0,r.jsx)(E.Z,{rules:[{required:!0}],label:"\u6587\u672C\u4E3B\u8F74\u4F4D\u7F6E",name:"text_flex_justify",fieldProps:{dropdownMatchSelectWidth:!1},options:[{label:"flex-start",value:"flex-start"},{label:"center",value:"center"},{label:"flex-end",value:"flex-end"},{label:"space-between",value:"space-between"},{label:"space-around",value:"space-around"},{label:"space-evenly",value:"space-evenly"}]}),(0,r.jsx)(E.Z,{rules:[{required:!0}],label:"\u6587\u672C\u4EA4\u53C9\u8F74\u4F4D\u7F6E",name:"text_flex_align",fieldProps:{dropdownMatchSelectWidth:!1},options:[{label:"flex-start",value:"flex-start"},{label:"center",value:"center"},{label:"flex-end",value:"flex-end"}]}),(0,r.jsx)(d.Z,{rules:[{required:!0}],label:"\u6587\u672C\u900F\u660E\u5EA6",name:"text_opacity",width:80})]})]})},ae=oe,le=function(){var n=(0,u.useState)(!1),t=(0,p.Z)(n,2),m=t[0],s=t[1],D=(0,u.useState)({}),O=(0,p.Z)(D,2),L=O[0],_=O[1],w=(0,u.useRef)(),B=[{title:"ID",dataIndex:"id"},{title:"\u6807\u9898",dataIndex:"title"},{title:"\u63CF\u8FF0",dataIndex:"description",valueType:"textarea"},{title:"\u7C7B\u578B",dataIndex:"c_type",filters:!0,onFilter:!0,valueEnum:{public:"\u5B8C\u5168\u516C\u5F00",protected:"\u5185\u90E8\u4F7F\u7528",private:"\u79C1\u6709"}},{title:"\u6805\u683C\u5E03\u5C40",dataIndex:"grid_row_col"},{title:"\u6805\u683C\u95F4\u8DDD",dataIndex:"grid_gutter"},{title:"\u989C\u8272",dataIndex:"font_color",render:function(C,l){return[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:l==null?void 0:l.font_color}),(0,r.jsx)("div",{style:{backgroundColor:l==null?void 0:l.font_color,width:"55px",height:"20px",border:"1px solid lightgray",display:"inline-block"}})]})]}},{title:"\u5B57\u4F53",dataIndex:"font_family"},{title:"\u6587\u5B57\u5927\u5C0F",dataIndex:"font_size"},{title:"\u80CC\u666F\u56FE\u7247",dataIndex:"background_img",render:function(C,l){return[(0,r.jsx)(F.Z,{src:l==null?void 0:l.background_img,width:35,height:35})]}},{title:"\u80CC\u666F\u989C\u8272",dataIndex:"background_color",render:function(C,l){return[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:l==null?void 0:l.background_color}),(0,r.jsx)("div",{style:{backgroundColor:l==null?void 0:l.background_color,width:"55px",height:"20px",border:"1px solid lightgray",display:"inline-block"}})]})]}},{title:"\u6587\u672C\u4E3B\u8F74\u4F4D\u7F6E",dataIndex:"text_flex_justify"},{title:"\u6587\u672C\u4EA4\u53C9\u4F4D\u7F6E",dataIndex:"text_flex_align"},{title:"\u6587\u672C\u900F\u660E\u5EA6",dataIndex:"text_opacity"},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"user"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"utime"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(C,l){return[(0,r.jsx)("a",{onClick:function(){s(!0),_(l)},children:"\u4FEE\u6539"},"config")]}}];return(0,r.jsxs)(x.ZP,{title:!1,pageHeaderRender:!1,children:[(0,r.jsx)(G.ZP,{headerTitle:"\u6A21\u677F\u5217\u8868",actionRef:w,rowKey:"key",size:"small",search:!1,options:{density:!1},toolBarRender:function(){return[(0,r.jsxs)(a.Z,{type:"primary",onClick:function(){_({}),s(!0)},children:[(0,r.jsx)(c.Z,{})," \u65B0\u5EFA"]},"primary")]},request:function(){var g=(0,y.Z)((0,f.Z)().mark(function C(l,v,b){var $;return(0,f.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,o.Nk)(l);case 2:return $=U.sent,U.abrupt("return",{data:$});case 4:case"end":return U.stop()}},C)}));return function(C,l,v){return g.apply(this,arguments)}}(),columns:B}),m&&(0,r.jsx)(ae,{record:L,setShowModal:s,showModal:m,actionRef:w})]})},se=le},25049:function(X,W,e){"use strict";e.d(W,{Nk:function(){return T},fc:function(){return p},Lk:function(){return u}});var f=e(39428),y=e(11849),P=e(3182),a=e(78370);function T(h,d){return F.apply(this,arguments)}function F(){return F=(0,P.Z)((0,f.Z)().mark(function h(d,j){return(0,f.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,a.Z)("/api/pic_book/layout/",(0,y.Z)({method:"GET",params:(0,y.Z)({},d)},j||{})));case 1:case"end":return i.stop()}},h)})),F.apply(this,arguments)}function p(h,d,j){return c.apply(this,arguments)}function c(){return c=(0,P.Z)((0,f.Z)().mark(function h(d,j,E){return(0,f.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,a.Z)("/api/pic_book/layout/".concat(d,"/"),(0,y.Z)({method:"PATCH",data:j},E||{})));case 1:case"end":return R.stop()}},h)})),c.apply(this,arguments)}function u(h,d){return x.apply(this,arguments)}function x(){return x=(0,P.Z)((0,f.Z)().mark(function h(d,j){return(0,f.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,a.Z)("/api/pic_book/layout/",(0,y.Z)({method:"POST",data:d},j||{})));case 1:case"end":return i.stop()}},h)})),x.apply(this,arguments)}function G(h,d){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function h(d,j){var E,i;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return E=d.id,i=E===void 0?0:E,M.abrupt("return",request("/api/pic_book/layout/".concat(i),_objectSpread({method:"DELETE"},j||{})));case 2:case"end":return M.stop()}},h)})),o.apply(this,arguments)}},78370:function(X,W,e){"use strict";var f=e(39428),y=e(34792),P=e(48086),a=e(3182),T=e(11849),F=e(11238);F.ZP.interceptors.request.use(function(p,c){if(p!="/v2api/auth/users/current/"){var u={Authorization:"Token "+localStorage.getItem("token")};return{url:p,options:(0,T.Z)((0,T.Z)({},c),{},{headers:u,interceptors:!0})}}return{url:p,options:(0,T.Z)((0,T.Z)({},c),{},{interceptors:!0})}}),F.ZP.interceptors.request.use(function(p,c){return{url:"".concat(p),options:(0,T.Z)((0,T.Z)({},c),{},{interceptors:!0})}},{global:!0}),F.ZP.interceptors.response.use(function(p,c){var u=p.headers.get("Content-Type");return p}),F.ZP.interceptors.response.use(function(){var p=(0,a.Z)((0,f.Z)().mark(function c(u){var x;return(0,f.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return x={500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"},x[u.status]&&P.ZP.error(x[u.status]),o.abrupt("return",u);case 3:case"end":return o.stop()}},c)}));return function(c){return p.apply(this,arguments)}}()),F.ZP.interceptors.response.use(function(){var p=(0,a.Z)((0,f.Z)().mark(function c(u){var x;return(0,f.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,u.clone().json();case 2:return x=o.sent,x&&x.NOT_LOGIN&&(location.href="\u767B\u5F55url"),o.abrupt("return",u);case 5:case"end":return o.stop()}},c)}));return function(c){return p.apply(this,arguments)}}()),W.Z=F.ZP}}]);
