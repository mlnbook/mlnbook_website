(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[15],{21832:function(R,C,s){"use strict";s.d(C,{rC:function(){return x},f$:function(){return m},V1:function(){return t},vT:function(){return c},FC:function(){return O},W8:function(){return g},EF:function(){return w},ic:function(){return E},P7:function(){return p}});var Z=s(39428),T=s(3182),M=s(86582),L=s(37720),k=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=void 0,o=function v(d,u){for(var l=0;l<d.length;l++){var h,_;if(((h=((_=d[l])===null||_===void 0?void 0:_.children)||[])===null||h===void 0?void 0:h.length)==0)return u(n?d[l].tag_label:{chapter_id:d[l].id,chapter_title:d[l].title,parent:d[l].parent});v(d[l].children,u)}},i=_toConsumableArray(e);return o(i,function(v){r==null&&(r=v)}),r},x=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=(0,M.Z)(e);if((r==null?void 0:r.length)>0)return{chapter_id:r[0].id,chapter_title:r[0].title,parent:r[0].parent}},m=function(){var a=(0,T.Z)((0,Z.Z)().mark(function e(){var n;return(0,Z.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,L.Qm)({});case 2:return n=o.sent,o.abrupt("return",n==null?void 0:n.map(function(i){return{label:i==null?void 0:i.knowledge,value:i==null?void 0:i.id}}));case 4:case"end":return o.stop()}},e)}));return function(){return a.apply(this,arguments)}}(),t=function(e){return e==null?void 0:e.map(function(n){return{label:"".concat(n==null?void 0:n.title,"(").concat(n==null?void 0:n.grid_row_col,")"),value:n==null?void 0:n.id}})},c=function(e){return e==null?void 0:e.reduce(function(n,r){var o=r==null?void 0:r.id;return n[o]=r,n},{})},b=function a(e){e==null||e.forEach(function(n){n.value=n.key,n!=null&&n.children&&a(n==null?void 0:n.children)})},O=function(e){var n=!0,r="";if(!e.dropToGap){var o;if(e.node.expanded&&((o=e.node.pos.split("-"))===null||o===void 0?void 0:o.length)>2)return{canDrag:!1,errMsg:"\u76EE\u5F55\u6700\u5927\u5C42\u7EA7\u4E0D\u80FD\u8D85\u8FC72\u5C42"}}return{canDrag:n,errMsg:r}},g=function(e,n){var r,o=K(e.dragNode.key,n);return{sort_key:e.dragNode.key,target_parent:o.target_parent,target_children:(r=o.target_children)===null||r===void 0?void 0:r.map(function(i){return i.key})}},K=function(e,n){var r="",o=[],i=function v(d,u,l,h){for(var _=0;_<d.length;_++){if(d[_].key===u)return h(d[_],_,l,d);d[_].children&&v(d[_].children,u,d[_].key,h)}};return i(n,e,null,function(v,d,u,l){r=u,o=l}),{target_parent:r,target_children:o}},w=function(e,n){var r=e.node.key,o=e.dragNode.key,i=e.node.pos.split("-"),v=e.dropPosition-Number(i[i.length-1]),d=function f(P,D,U){for(var j=0;j<P.length;j++){if(P[j].key===D)return U(P[j],j,P);P[j].children&&f(P[j].children,D,U)}},u=(0,M.Z)(n),l;if(d(u,o,function(f,P,D){D.splice(P,1),l=f}),!e.dropToGap)d(u,r,function(f){f.children=f.children||[],f.children.unshift(l)});else if((e.node.props.children||[]).length>0&&e.node.props.expanded&&v===1)d(u,r,function(f){f.children=f.children||[],f.children.unshift(l)});else{var h,_;d(u,r,function(f,P,D){h=D,_=P}),v===-1?h.splice(_,0,l):h.splice(_+1,0,l)}return u},E=function(e,n){var r=0;if((n==null?void 0:n.c_type)=="norm"){var o,i,v,d=(o=JSON.parse(n==null||(i=n.layout_cfg)===null||i===void 0||(v=i[0])===null||v===void 0?void 0:v.grid_row_col))===null||o===void 0?void 0:o.length;r=Math.ceil((e==null?void 0:e.length)/d)}return r},p=function(e,n,r){var o=0,i=[],v=c(n);return e==null||e.forEach(function(d){if(o<(r==null?void 0:r.length)){var u,l;o+=(u=JSON.parse(v==null||(l=v[d])===null||l===void 0?void 0:l.grid_row_col))===null||u===void 0?void 0:u.length,i.push(d)}}),{select_cnt:o,format_layout:i}}},86028:function(R,C,s){"use strict";s.d(C,{J6:function(){return L},DO:function(){return k},xX:function(){return x}});var Z=s(81354),T=s.n(Z),M=s(21832),L=function(t){return Z.MD5(t).toString()},k=function(){var t=new Date().getTime(),c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var O=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(b=="x"?O:O&7|8).toString(16)});return c},x=function(t,c,b){var O,g,K=[],w;if(b!=null?w=c==null?void 0:c.find(function(u){return u.id==b}):w=(c==null?void 0:c[0])||{},((O=w)===null||O===void 0?void 0:O.c_type)=="norm"){var E,p,a,e,n=(E=JSON.parse((p=w)===null||p===void 0||(a=p.layout_cfg)===null||a===void 0||(e=a[0])===null||e===void 0?void 0:e.grid_row_col))===null||E===void 0?void 0:E.length;t==null||t.forEach(function(u){var l;if((u==null||(l=u.paragraph_set)===null||l===void 0?void 0:l.length)>0)for(var h,_=Math.ceil((u==null||(h=u.paragraph_set)===null||h===void 0?void 0:h.length)/n),f=0;f<_;f+=n){var P,D,U;K.push({paragraph:u==null||(P=u.paragraph_set)===null||P===void 0?void 0:P.slice(f,f+n),layout_cfg:(D=w)===null||D===void 0||(U=D.layout_cfg)===null||U===void 0?void 0:U[0]})}})}else if(((g=w)===null||g===void 0?void 0:g.c_type)=="custom"){var r,o,i,v=(0,M.vT)((r=w)===null||r===void 0?void 0:r.layout_cfg),d=(o=w)===null||o===void 0||(i=o.chapter_typesets)===null||i===void 0?void 0:i.reduce(function(u,l){var h=l==null?void 0:l.chapter;return u[h]=l,u},{});t==null||t.forEach(function(u){var l,h=(d==null||(l=d[u==null?void 0:u.id])===null||l===void 0?void 0:l.setting)||[],_=(u==null?void 0:u.paragraph_set)||[],f=0;h==null||h.forEach(function(P){if(f<(_==null?void 0:_.length)){var D,U,j=(D=JSON.parse(v==null||(U=v[P])===null||U===void 0?void 0:U.grid_row_col))===null||D===void 0?void 0:D.length;K.push({paragraph:_==null?void 0:_.slice(f,f+j),layout_cfg:(v==null?void 0:v[P])||{}}),f+=j}})})}return K}},37720:function(R,C,s){"use strict";s.d(C,{Qm:function(){return m},Et:function(){return c},dz:function(){return O}});var Z=s(93224),T=s(39428),M=s(11849),L=s(3182),k=s(78370),x=["id"];function m(E,p){return t.apply(this,arguments)}function t(){return t=(0,L.Z)((0,T.Z)().mark(function E(p,a){return(0,T.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,k.Z)("/api/pic_book/knowledge/",(0,M.Z)({method:"GET",params:(0,M.Z)({},p)},a||{})));case 1:case"end":return n.stop()}},E)})),t.apply(this,arguments)}function c(E,p){return b.apply(this,arguments)}function b(){return b=(0,L.Z)((0,T.Z)().mark(function E(p,a){var e,n,r;return(0,T.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=p.id,n=e===void 0?0:e,r=(0,Z.Z)(p,x),i.abrupt("return",(0,k.Z)("/api/pic_book/knowledge/".concat(n,"/"),(0,M.Z)({method:"PATCH",data:(0,M.Z)({},r)},a||{})));case 2:case"end":return i.stop()}},E)})),b.apply(this,arguments)}function O(E,p){return g.apply(this,arguments)}function g(){return g=(0,L.Z)((0,T.Z)().mark(function E(p,a){return(0,T.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,k.Z)("/api/pic_book/knowledge/",(0,M.Z)({method:"POST",data:(0,M.Z)({},p)},a||{})));case 1:case"end":return n.stop()}},E)})),g.apply(this,arguments)}function K(E,p){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function E(p,a){var e,n;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=p.id,n=e===void 0?0:e,o.abrupt("return",request("/api/pic_book/knowledge/".concat(n),_objectSpread({method:"DELETE"},a||{})));case 2:case"end":return o.stop()}},E)})),w.apply(this,arguments)}},78370:function(R,C,s){"use strict";var Z=s(39428),T=s(34792),M=s(48086),L=s(3182),k=s(11849),x=s(11238);x.ZP.interceptors.request.use(function(m,t){if(m!="/v2api/auth/users/current/"){var c={Authorization:"Token "+localStorage.getItem("token")};return{url:m,options:(0,k.Z)((0,k.Z)({},t),{},{headers:c,interceptors:!0})}}return{url:m,options:(0,k.Z)((0,k.Z)({},t),{},{interceptors:!0})}}),x.ZP.interceptors.request.use(function(m,t){return{url:"".concat(m),options:(0,k.Z)((0,k.Z)({},t),{},{interceptors:!0})}},{global:!0}),x.ZP.interceptors.response.use(function(m,t){var c=m.headers.get("Content-Type");return m}),x.ZP.interceptors.response.use(function(){var m=(0,L.Z)((0,Z.Z)().mark(function t(c){var b;return(0,Z.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return b={500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"},b[c.status]&&M.ZP.error(b[c.status]),g.abrupt("return",c);case 3:case"end":return g.stop()}},t)}));return function(t){return m.apply(this,arguments)}}()),x.ZP.interceptors.response.use(function(){var m=(0,L.Z)((0,Z.Z)().mark(function t(c){var b;return(0,Z.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,c.clone().json();case 2:return b=g.sent,b&&b.NOT_LOGIN&&(location.href="\u767B\u5F55url"),g.abrupt("return",c);case 5:case"end":return g.stop()}},t)}));return function(t){return m.apply(this,arguments)}}()),C.Z=x.ZP},42480:function(){}}]);
